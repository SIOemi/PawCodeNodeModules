{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\d896422\\\\Documents\\\\hello\\\\paw_code\\\\src\\\\components\\\\discoUnidad\\\\discoUnidad.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport DiscoUnidadHeader from './discoUnidadHeader';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DiscoTrabajo from '../discoTrabajo/discoTrabajo';\nimport { Box, Hidden, Fab } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport BookmarkBorderSharpIcon from '@material-ui/icons/BookmarkBorderSharp';\nimport { AppContext } from '../../appProvider';\nimport { ContactsOutlined } from '@material-ui/icons';\nimport dateFormat, { masks } from \"dateformat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DiscoUnidad = props => {\n  _s();\n\n  //ver/ocultar discos finalizados\n  //si estoy en la lista de todos no los muestro\n  const [verFinalizados, setVerFinalizados] = React.useState(!props.todos);\n  const [state, setState] = React.useContext(AppContext);\n  const [mostrarControles, setMostrarControles] = React.useState(props.soloActivos);\n  const [ocultarFinalizadosVertical, setOcultarFinalizadosVertical] = React.useState(props.soloActivos);\n  const useStyles = makeStyles(theme => ({\n    root: {\n      position: 'relative'\n    },\n    rootResltado: {\n      position: 'relative',\n      backgroundColor: '#0678f40f',\n      borderStyle: 'solid',\n      borderColor: 'gray',\n      borderWidth: 2,\n      borderColor: \"#92979c33\",\n      borderRadius: 10,\n      paddingTop: 20,\n      paddingBottom: 20\n    },\n    ultimo: {\n      padding: 7,\n      paddingRight: 10,\n      fontWeight: 500,\n      backgroundColor: \"#92979c33\",\n      borderBottomRightRadius: 10,\n      borderTopRightRadius: 10,\n      width: 'fit-content'\n    }\n  }));\n  const classes = useStyles();\n\n  const sePuedeSolicitarFirma = () => {\n    if (props.estado === \"finalizado\" || props.estado === \"retirado\") return false;\n\n    for (var dtidx in props.discosTrabajos) {\n      var estado = props.discosTrabajos[dtidx].estado;\n      if (estado !== \"finalizado\" && estado !== \"desasignado\") return false;\n    }\n\n    return true;\n  };\n\n  var resaltarPorFechaBusqueda = false;\n\n  if (state.fechaResaltadaDesde && state.fechaResaltadaHasta) {\n    let desde = dateFormat(new Date(parseInt(state.fechaResaltadaDesde)), \"isoUtcDateTime\");\n    let hasta = dateFormat(new Date(parseInt(state.fechaResaltadaHasta)), \"isoUtcDateTime\");\n    resaltarPorFechaBusqueda = !(desde <= props.fecha && hasta >= props.fecha);\n  }\n\n  const sePuedeEliminar = () => props.discosTrabajos.length === 0 && !props.firmaSolicitada && !props.firmaPlanificada && props.estado !== \"finalizado\" && props.estado !== \"retirado\";\n\n  const finalizado = props.estado === \"finalizado\" || props.estado === \"retirado\";\n  const vistaHorizontal = state.vistaHorizontal;\n  let mostrarFinalizados = false;\n\n  const discoDeTrabajo = dt => {\n    const resaltarBusqueda = state.numeroDiscoResaltado && dt.numero && state.numeroDiscoResaltado.toUpperCase() === dt.numero.toUpperCase();\n    const resalatdoFiltro = props.resaltadoFiltro !== \"\" && (dt.numero.toLowerCase().includes(props.resaltadoFiltro) || dt.nombre.toLowerCase().includes(props.resaltadoFiltro) || dt.nominado && dt.ubicacion.toLowerCase().includes(props.resaltadoFiltro));\n    const resaltarNumero = resaltarBusqueda || resalatdoFiltro;\n    if (resaltarNumero) mostrarFinalizados = true;\n\n    const parametrosDT = dt => ({ ...dt,\n      idDU: props.id,\n      key: dt.id,\n      fecha: dt.fecha,\n      numeroDU: props.numero,\n      soloActivos: props.soloActivos,\n      accionesDT: props.accionesDT,\n      nominado: props.nominado,\n      incidencia: props.incidencia,\n      tipo: dt.estado,\n      resaltadoFiltro: props.resaltadoFiltro,\n      resaltarNumero: resaltarNumero\n    });\n\n    return /*#__PURE__*/_jsxDEV(DiscoTrabajo, { ...parametrosDT(dt)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 16\n    }, this);\n  };\n\n  const header = vistaCelular => props.nominado ? !vistaHorizontal ? /*#__PURE__*/_jsxDEV(DiscoUnidadHeader, { ...props,\n    vistaCelular: vistaCelular,\n    idDU: props.id,\n    nominado: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 13\n  }, this) : null : /*#__PURE__*/_jsxDEV(DiscoUnidadHeader, { ...props,\n    vistaCelular: vistaCelular,\n    resaltarPorFechaBusqueda: resaltarPorFechaBusqueda,\n    setVerFinalizados: setVerFinalizados,\n    cantidadDiscos: props.discosTrabajos.length,\n    finalizado: finalizado,\n    sePuedeSolicitarFirma: sePuedeSolicitarFirma(),\n    idDU: props.id,\n    sePuedeEliminar: sePuedeEliminar(),\n    resaltadoFiltro: props.resaltadoFiltro\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 11\n  }, this);\n\n  const discosDeTrabajo = props.discosTrabajos.map(dt => !(vistaHorizontal && !verFinalizados && dt.estado === \"finalizado\" && finalizado) && discoDeTrabajo(dt));\n  const discosDeTrabajoNoFinalizados = props.discosTrabajos.map(dt => !(dt.estado === \"finalizado\" || dt.estado === \"retirado\") && discoDeTrabajo(dt));\n  const discosDeTrabajoFinalizados = props.discosTrabajos.map(dt => !(dt.estado !== \"finalizado\" && dt.estado !== \"retirado\") && discoDeTrabajo(dt));\n  const cantidadDiscosFirmados = props.discosTrabajos.filter(e => e.estado === \"finalizado\" || e.estado === \"retirado\" ? e : null).length;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    className: props.id === state.idDU_UltimaAccion ? classes.rootResltado : classes.root,\n    children: [props.id === state.idDU_UltimaAccion && /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      className: classes.ultimo,\n      children: [/*#__PURE__*/_jsxDEV(BookmarkBorderSharpIcon, {\n        style: {\n          width: 20,\n          height: 20,\n          marginRight: 5\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\xDAltima acci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n      smUp: true,\n      children: [header(true) + dasdsadsad, /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        children: discosDeTrabajo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Hidden, {\n      xsDown: true,\n      children: vistaHorizontal ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [header(false), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          style: !props.nominado ? {\n            marginLeft: 85\n          } : {},\n          children: [discosDeTrabajoNoFinalizados, !props.verFinalizados && discosDeTrabajoFinalizados]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexWrap: \"noWrap\",\n          flexDirection: \"row\",\n          alignItems: \"top\",\n          style: !props.nominado ? {\n            marginLeft: 0\n          } : {},\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxWidth: 300,\n              minWidth: 300,\n              marginTop: 0\n            },\n            children: [\" \", header(false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            children: [discosDeTrabajoNoFinalizados, (!ocultarFinalizadosVertical || mostrarFinalizados) && discosDeTrabajoFinalizados, !mostrarFinalizados && mostrarControles && cantidadDiscosFirmados > 0 && /*#__PURE__*/_jsxDEV(Fab, {\n              color: \"secondary\",\n              style: {\n                marginLeft: 20,\n                marginTop: 20\n              },\n              color: \"default\",\n              onClick: () => setOcultarFinalizadosVertical(!ocultarFinalizadosVertical),\n              children: !ocultarFinalizadosVertical ? /*#__PURE__*/_jsxDEV(ClearIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 73\n              }, this) : /*#__PURE__*/_jsxDEV(ChevronRightIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 89\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DiscoUnidad, \"9ncVQCrV4Cm0O38fZ2vaCP1oRE4=\", true);\n\n_c = DiscoUnidad;\nexport default DiscoUnidad;\n\nvar _c;\n\n$RefreshReg$(_c, \"DiscoUnidad\");","map":{"version":3,"sources":["C:/Users/d896422/Documents/hello/paw_code/src/components/discoUnidad/discoUnidad.js"],"names":["React","DiscoUnidadHeader","makeStyles","DiscoTrabajo","Box","Hidden","Fab","ChevronRightIcon","ClearIcon","BookmarkBorderSharpIcon","AppContext","ContactsOutlined","dateFormat","masks","DiscoUnidad","props","verFinalizados","setVerFinalizados","useState","todos","state","setState","useContext","mostrarControles","setMostrarControles","soloActivos","ocultarFinalizadosVertical","setOcultarFinalizadosVertical","useStyles","theme","root","position","rootResltado","backgroundColor","borderStyle","borderColor","borderWidth","borderRadius","paddingTop","paddingBottom","ultimo","padding","paddingRight","fontWeight","borderBottomRightRadius","borderTopRightRadius","width","classes","sePuedeSolicitarFirma","estado","dtidx","discosTrabajos","resaltarPorFechaBusqueda","fechaResaltadaDesde","fechaResaltadaHasta","desde","Date","parseInt","hasta","fecha","sePuedeEliminar","length","firmaSolicitada","firmaPlanificada","finalizado","vistaHorizontal","mostrarFinalizados","discoDeTrabajo","dt","resaltarBusqueda","numeroDiscoResaltado","numero","toUpperCase","resalatdoFiltro","resaltadoFiltro","toLowerCase","includes","nombre","nominado","ubicacion","resaltarNumero","parametrosDT","idDU","id","key","numeroDU","accionesDT","incidencia","tipo","header","vistaCelular","discosDeTrabajo","map","discosDeTrabajoNoFinalizados","discosDeTrabajoFinalizados","cantidadDiscosFirmados","filter","e","idDU_UltimaAccion","height","marginRight","dasdsadsad","marginLeft","maxWidth","minWidth","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DiscoUnidadHeader from './discoUnidadHeader';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport DiscoTrabajo from '../discoTrabajo/discoTrabajo';\r\nimport { Box, Hidden, Fab } from '@material-ui/core';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport BookmarkBorderSharpIcon from '@material-ui/icons/BookmarkBorderSharp';\r\nimport { AppContext } from '../../appProvider';\r\nimport { ContactsOutlined } from '@material-ui/icons';\r\nimport dateFormat, { masks } from \"dateformat\";\r\n\r\n\r\n\r\nconst DiscoUnidad = (props) => {\r\n\r\n  \r\n    //ver/ocultar discos finalizados\r\n    //si estoy en la lista de todos no los muestro\r\n    const [verFinalizados, setVerFinalizados] = React.useState(!props.todos);\r\n    const [state, setState] = React.useContext(AppContext);\r\n    const [mostrarControles, setMostrarControles] = React.useState(props.soloActivos);\r\n\r\n    const [ocultarFinalizadosVertical, setOcultarFinalizadosVertical] = React.useState(props.soloActivos);\r\n\r\n\r\n    const useStyles = makeStyles(theme => ({\r\n        root: {\r\n            position: 'relative',\r\n        },\r\n        rootResltado: {\r\n            position: 'relative',\r\n            backgroundColor: '#0678f40f',\r\n            borderStyle: 'solid',\r\n            borderColor: 'gray',\r\n            borderWidth: 2,\r\n            borderColor: \"#92979c33\",\r\n            borderRadius: 10,\r\n            paddingTop: 20,\r\n            paddingBottom: 20\r\n        },\r\n        ultimo: {\r\n            padding: 7,\r\n            paddingRight: 10,\r\n            fontWeight: 500,\r\n            backgroundColor: \"#92979c33\",\r\n            borderBottomRightRadius: 10,\r\n            borderTopRightRadius: 10,\r\n            width: 'fit-content'\r\n\r\n        }\r\n    }));\r\n\r\n    const classes = useStyles();\r\n    const sePuedeSolicitarFirma = () => {\r\n        if (props.estado === \"finalizado\" || props.estado === \"retirado\") return false;\r\n        for (var dtidx in props.discosTrabajos) {\r\n            var estado = props.discosTrabajos[dtidx].estado;\r\n            if (estado !== \"finalizado\" && estado !== \"desasignado\") return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    var resaltarPorFechaBusqueda = false;\r\n\r\n    if (state.fechaResaltadaDesde && state.fechaResaltadaHasta){\r\n      let desde = dateFormat(new Date(parseInt(state.fechaResaltadaDesde)),\"isoUtcDateTime\");\r\n      let hasta = dateFormat(new Date(parseInt(state.fechaResaltadaHasta)),\"isoUtcDateTime\");\r\n      resaltarPorFechaBusqueda = !(desde <= props.fecha && hasta >= props.fecha);\r\n    }\r\n   \r\n\r\n    const sePuedeEliminar = () =>\r\n        props.discosTrabajos.length === 0 &&\r\n        !props.firmaSolicitada\r\n        && !props.firmaPlanificada\r\n        && props.estado !== \"finalizado\"\r\n        && props.estado !== \"retirado\";\r\n\r\n    const finalizado = props.estado === \"finalizado\" || props.estado === \"retirado\";\r\n\r\n    const vistaHorizontal = state.vistaHorizontal;\r\n\r\n    let mostrarFinalizados = false; \r\n    \r\n    const discoDeTrabajo = (dt) => {\r\n\r\n        const resaltarBusqueda = \r\n            (\r\n                state.numeroDiscoResaltado &&\r\n                dt.numero &&  \r\n                state.numeroDiscoResaltado.toUpperCase()===dt.numero.toUpperCase() \r\n            );\r\n\r\n        const resalatdoFiltro = \r\n            props.resaltadoFiltro !==\"\" && \r\n                (\r\n                    dt.numero.toLowerCase().includes(props.resaltadoFiltro) ||\r\n                    dt.nombre.toLowerCase().includes(props.resaltadoFiltro) ||\r\n                (\r\n                    dt.nominado &&  dt.ubicacion.toLowerCase().includes(props.resaltadoFiltro) \r\n                )\r\n            );\r\n\r\n        const resaltarNumero = resaltarBusqueda || resalatdoFiltro;\r\n\r\n        if (resaltarNumero) \r\n            mostrarFinalizados = true;\r\n\r\n        const parametrosDT = (dt) => ({\r\n            ...dt,\r\n            idDU: props.id,\r\n            key: dt.id,\r\n            fecha: dt.fecha,\r\n            numeroDU: props.numero,\r\n            soloActivos: props.soloActivos,\r\n            accionesDT: props.accionesDT,\r\n            nominado: props.nominado,\r\n            incidencia: props.incidencia,\r\n            tipo: dt.estado,\r\n            resaltadoFiltro: props.resaltadoFiltro,\r\n            resaltarNumero: resaltarNumero\r\n        })\r\n        return <DiscoTrabajo {...parametrosDT(dt)} />\r\n    }\r\n\r\n\r\n    \r\n\r\n    const header = (vistaCelular) => (props.nominado)\r\n        ? !vistaHorizontal\r\n            ?\r\n            <DiscoUnidadHeader\r\n                {...props}\r\n                vistaCelular={vistaCelular}\r\n                idDU={props.id}\r\n                nominado\r\n            />\r\n            : null\r\n        : <DiscoUnidadHeader\r\n        \r\n            {...props}\r\n            vistaCelular={vistaCelular}\r\n            resaltarPorFechaBusqueda={resaltarPorFechaBusqueda}\r\n            setVerFinalizados={setVerFinalizados}\r\n            cantidadDiscos={props.discosTrabajos.length}\r\n            finalizado={finalizado}\r\n            sePuedeSolicitarFirma={sePuedeSolicitarFirma()}\r\n            idDU={props.id}\r\n            sePuedeEliminar={sePuedeEliminar()}\r\n            resaltadoFiltro={props.resaltadoFiltro}\r\n        />;\r\n\r\n    const discosDeTrabajo =\r\n        props.discosTrabajos.map(dt => !(vistaHorizontal && !verFinalizados && dt.estado === \"finalizado\" && finalizado) && discoDeTrabajo(dt))\r\n\r\n\r\n    const discosDeTrabajoNoFinalizados =\r\n        props.discosTrabajos.map(dt => !(dt.estado === \"finalizado\" || dt.estado === \"retirado\") && discoDeTrabajo(dt))\r\n\r\n\r\n    const discosDeTrabajoFinalizados =\r\n        props.discosTrabajos.map(dt =>!(dt.estado !== \"finalizado\" && dt.estado !== \"retirado\") && discoDeTrabajo(dt))\r\n\r\n    const cantidadDiscosFirmados =\r\n        props.discosTrabajos.filter(e => (e.estado === \"finalizado\" || e.estado === \"retirado\") ? e : null).length;\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" className={props.id === state.idDU_UltimaAccion ? classes.rootResltado : classes.root}>\r\n\r\n            {(props.id === state.idDU_UltimaAccion) &&\r\n                <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" className={classes.ultimo}>\r\n                    <BookmarkBorderSharpIcon style={{ width: 20, height: 20, marginRight: 5 }} />\r\n                    <span>Última acción</span>\r\n                </Box>\r\n            }\r\n\r\n            {/*Celular*/}\r\n            <Hidden smUp>\r\n                {header(true) +  dasdsadsad}\r\n                <Box display=\"flex\" flexWrap=\"wrap\">\r\n                    {discosDeTrabajo}\r\n                </Box>\r\n            </Hidden>\r\n\r\n            {/*PC*/}\r\n            <Hidden xsDown>\r\n                \r\n                {vistaHorizontal\r\n                    ? <div>\r\n                        {header(false)}\r\n                        <Box display=\"flex\" flexWrap=\"wrap\" style={!props.nominado ? { marginLeft: 85 } : {}}>\r\n                            {discosDeTrabajoNoFinalizados}\r\n                            {!props.verFinalizados && discosDeTrabajoFinalizados}\r\n                        </Box>\r\n                    </div>\r\n                    : <div>\r\n                        <Box display=\"flex\" flexWrap=\"noWrap\" flexDirection=\"row\" alignItems=\"top\" style={!props.nominado ? { marginLeft: 0, } : {}}>\r\n                            <div style={{ maxWidth: 300, minWidth: 300, marginTop: 0 }}> {header(false)}</div>\r\n                            <Box display=\"flex\" flexWrap=\"wrap\" flexDirection=\"row\" alignItems=\"center\">\r\n                                {discosDeTrabajoNoFinalizados}\r\n                                {(!ocultarFinalizadosVertical || mostrarFinalizados) && discosDeTrabajoFinalizados}\r\n                                {!mostrarFinalizados && mostrarControles && (cantidadDiscosFirmados > 0) &&\r\n                                    <Fab color=\"secondary\" style={{ marginLeft: 20, marginTop: 20 }} color=\"default\" onClick={() => setOcultarFinalizadosVertical(!ocultarFinalizadosVertical)}>\r\n                                        { !ocultarFinalizadosVertical ? <ClearIcon /> : <ChevronRightIcon />}\r\n                                    </Fab>\r\n                                }\r\n                            </Box>\r\n                        </Box>\r\n                    </div>\r\n                }\r\n            </Hidden>\r\n        </Box>);\r\n}\r\n\r\nexport default DiscoUnidad;"]},"metadata":{},"sourceType":"module"}