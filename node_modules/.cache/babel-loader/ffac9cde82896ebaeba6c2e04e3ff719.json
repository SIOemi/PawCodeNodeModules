{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\d896422\\\\Documents\\\\hello\\\\paw_code\\\\src\\\\components\\\\discoUnidad\\\\consultaDiscoUnidad.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport unidades from '../../datos/unidades.json';\nimport SecurityOutlinedIcon from '@material-ui/icons/SecurityOutlined';\nimport PermIdentityOutlinedIcon from '@material-ui/icons/PermIdentityOutlined';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport LaunchOutlinedIcon from '@material-ui/icons/LaunchOutlined';\nimport { AppContext } from '../../appProvider';\nimport { obtenerNombrePersona, formatearNombre, formatDate } from '../../utils/utils';\nimport SendToMobileOutlinedIcon from '@mui/icons-material/SendToMobileOutlined';\nimport ArrowForwardOutlinedIcon from '@mui/icons-material/ArrowForwardOutlined';\nimport PersonOutlinedIcon from '@mui/icons-material/PersonOutlined';\nimport HelpIcon from '@mui/icons-material/Help';\nimport { serviciosGEMA } from '../../servicios/servicios';\nimport { AppBar, Toolbar, IconButton, Typography, Button, Box, SwipeableDrawer, Tooltip } from '@material-ui/core';\nimport Incidencia from '../incidencia/incidencia';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BlackTooltip = withStyles({\n  tooltip: {\n    color: \"white\",\n    backgroundColor: \"black\",\n    fontSize: 16\n  }\n})(Tooltip);\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    position: 'relative'\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    marginRight: theme.spacing(1)\n  },\n  table: {\n    padding: theme.spacing(4),\n    paddingTop: 0,\n    marginTop: theme.spacing(2)\n  },\n  actions: {\n    marginTop: 10,\n    marginLeft: 10\n  },\n  cell100: {\n    width: 100,\n    maxWidth: 100\n  },\n  cell300: {\n    width: 300,\n    maxWidth: 300\n  },\n  boxEstado: {\n    margin: 20,\n    marginBottom: 0,\n    padding: 10,\n    borderRadius: 10,\n    backgroundColor: \"#cebcbc2b\"\n  },\n  boxEstadoOpen: {\n    margin: 20,\n    marginBottom: 0,\n    padding: 10,\n    backgroundColor: \"#706d6d24\",\n    borderLeft: \"3px solid #767676\",\n    \"&:hover\": {\n      cursor: 'pointer'\n    }\n  },\n  unidad: {\n    backgroundColor: \"#ededed\",\n    padding: 2,\n    borderRadius: 5,\n    fontWeight: 500\n  },\n  footerAcciones: {\n    [theme.breakpoints.up('lg')]: {\n      marginLeft: 56\n    },\n    marginLeft: 16,\n    paddingBottom: 25\n  },\n  consultaDisco: {\n    width: 400,\n    marginLeft: 50\n  },\n  discoSustituidoBox: {\n    backgroundColor: \"white\",\n    padding: 5,\n    borderRadius: 10,\n    width: 80,\n    borderWidth: 1,\n    borderColor: \"#6a6868\",\n    borderStyle: \"solid\"\n  }\n}));\nvar comentarioColocacionSIO = \"\";\nexport default function ConsultaDiscoUnidad(props) {\n  _s();\n\n  const classes = useStyles();\n  const [rows, setRows] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  var unidad = unidades.filter(u => u.id == props.unidad);\n  unidad = unidad && unidad.length > 0 ? unidad[0].desc : \"unidad destinataria\";\n\n  const crearHistorico = (historico, jefeDeTrabajosActual) => {\n    var datos = [];\n    var estadoAnterior = \"\";\n    console.log(historico);\n    historico.map(e => {\n      var row = {};\n      row.rowId = e._rowstamp; //usuario (registrado por)\n\n      row.usuario = obtenerNombrePersona(e.changeby, e.person, true); //comentario\n\n      row.comentario = e.memo; //estado - mostrar jefe de trabajos\n\n      var estado = e.status;\n      row.mostrarJefeDeTrabajos = estado === \"FIRMPLA\" || estado === \"FIRM_SOL\" || estado === \"FIRMADO\";\n      if (estado === \"COLOCADO\") estado = \"Colocado en SIO\";\n      if (estado === \"ENVIADO\") estado = \"Disponible en PAW\";\n      if (estado === \"FIRMPLA\") estado = \"Planificación de firma\";\n      if (estado === \"FIRM_SOL\") estado = \"Solicitud de firma\";\n      if (estado === \"RETIRADO\") estado = \"Retirado en SIO\";\n      if (estado === \"EXTRAVIADO\") estado = \"Sustituido por extravío\";\n      if (estado === \"FIRMADO\") estado = \"Firmado\"; //aca debo cambiar si el estado es sustituido deberia de ser \n\n      estadoAnterior = estado;\n      row.estado = estado; //jefe de trabajos\n\n      row.jefeDeTrabajos = obtenerNombrePersona(e.jefetrabajo, e.person, true); //fecha\n\n      var fecha = formatDate(e.changedate);\n      row.fecha = fecha.d + \" \" + fecha.m + \" \" + fecha.y + \"   \" + fecha.hh + \":\" + (fecha.mm < 10 ? '0' : '') + fecha.mm; //contingencia\n\n      row.accionEncontingencia = row.comentario.startsWith(\"Contingencia: \");\n      row.discoSustituido = row.estado === \"Sustituido por extravío\";\n      datos.push(row);\n    });\n    datos.sort((a, b) => a.rowId > b.rowId ? 1 : a.rowId < b.rowId ? -1 : 0); //recorro los datos y le asigno a cada registro el JT siguiente\n\n    for (var i = 0; i < datos.length - 1; i++) datos[i].jefeDeTrabajos = datos[i].estado === \"Disponible en PAW\" || datos[i].estado === \"Colocado en SIO\" || datos[i].estado === \"Retirado en SIO\" ? \"---\" : datos[i + 1].jefeDeTrabajos; //el último JT es el actual\n\n\n    var estado = datos[datos.length - 1].estado;\n    datos[datos.length - 1].jefeDeTrabajos = estado === \"Solicitud de firma\" || estado === \"Planificación de firma\" || estado === \"Firmado\" ? formatearNombre(jefeDeTrabajosActual) : \"---\"; //descripciones segun estado\n\n    var estadoAnterior = null;\n    datos.map(e => {\n      if (!estadoAnterior) e.desc = \"Disco ingresado en SIO\";else if (estadoAnterior === \"Colocado en SIO\") {\n        e.desc = \"Disco enviado a unidad destinataria\";\n        comentarioColocacionSIO = e.comentario;\n      } else if (e.estado === \"Firmado\") e.desc = \"Disco firmado\";else if (e.estado === \"Retirado\") e.desc = \"Disco retirado en SIO\";else if (estadoAnterior === \"Planificación de firma\" && e.estado === \"Disponible en PAW\") e.desc = \"Desasignación de persona para firmar el disco\";else if (estadoAnterior === \"Disponible en PAW\" && e.estado === \"Planificación de firma\") e.desc = \"Designación de persona para firmar el disco\";else if (estadoAnterior === \"Disponible en PAW\" && e.estado === \"Solicitud de firma\") e.desc = \"Designación de persona para firmar el disco\";else if (estadoAnterior === \"Planificación de firma\" && e.estado === \"Solicitud de firma\") e.desc = \"Automático: discos nominados asociados firmados\";else if (estadoAnterior === \"Solicitud de firma\" && e.estado === \"Planificación de firma\") {\n        if (e.comentario === \"Cambio automático. Nueva Asignacion de jefe de trabajo.\") e.desc = \"Automático: nueva asigación de jefe de trabajo\";else e.desc = \"Cancelación de solicitud de firma\";\n      } else if (e.estado === \"Retirado en SIO\") e.desc = \"Disco retirado en SIO\";else if (estadoAnterior === \"Solicitud de firma\" && e.estado === \"Disponible en PAW\") e.desc = \"Cancelación de solicitud de firma\"; // aca habria que colocar otra descripcion para que diga Incidencia sustituida por tal \n      //lo que vendria a ser el cambio que solicitan el de cambio de incidencia en discos\n      // else if(e.estado === \"\")\n      // e.desc = \"Disco viene de la incidencia anterior\" + numero de incidencia    \n      else if (e.estado === \"Sustituido por extravío\") e.desc = \"Se coloca un nuevo disco\";\n      estadoAnterior = e.estado;\n    });\n    return datos;\n  };\n\n  var datos = [];\n  React.useEffect(() => {\n    if (props.open) {\n      setLoading(true);\n      serviciosGEMA.get('/utd_nardisdisco/' + props.idDU + '/utd_hstatusnardisdisco?lean=1&oslc.select=*&_dropnulls=0').then(response => {\n        datos = crearHistorico(response.data.member, props.jefeDeTrabajosActual);\n        setRows(datos);\n        setLoading(false);\n      }).catch(error => {\n        setLoading(false);\n        console.log(\"Error cargar las actividades del disco a unidad\");\n      });\n    }\n  }, [props.open]); //ocultar/mostrar contenido en vista celular\n\n  const [showMoreContent, setshowMoreContent] = React.useState({}); //perfil\n\n  const [state] = React.useContext(AppContext);\n  const CONFIG = window.data;\n  console.log(\"estoy en row\");\n  console.log(rows);\n\n  const panel = /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      className: classes.appBar,\n      color: \"transparent\",\n      elevation: 0,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        style: {\n          minHeight: 90\n        },\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          edge: \"start\",\n          color: \"inherit\",\n          onClick: props.handleClose,\n          \"aria-label\": \"close\",\n          style: {\n            marginRight: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              height: 50\n            },\n            alt: \"\",\n            src: !props.finalizado ? \"/PAW/assets/images/unidadIcon.svg\" : \"/PAW/assets/images/unidadGrisIcon.svg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            flexDirection: \"column\",\n            className: classes.title,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: props.numero\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.unidad,\n              children: unidad\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      flexDirection: \"column\",\n      style: {\n        margin: 20,\n        marginBottom: 0,\n        marginTop: 5,\n        padding: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: props.ubicacion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this), !state.operadorCMD && /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"left\",\n        style: {\n          marginTop: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: CONFIG.localizar_GOOGLE(props.latitud, props.longitud),\n          target: \"_blank\",\n          style: {\n            textDecoration: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            endIcon: /*#__PURE__*/_jsxDEV(LaunchOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 84\n            }, this),\n            children: \"Google Maps\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: CONFIG.localizar_EGEO(props.latitud, props.longitud),\n          target: \"_blank\",\n          style: {\n            textDecoration: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            endIcon: /*#__PURE__*/_jsxDEV(LaunchOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 84\n            }, this),\n            style: {\n              marginLeft: 10\n            },\n            children: \"EGEO WEB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), !loading ? rows.map(row => /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      flexDirection: \"column\",\n      className: classes.boxEstado,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        style: {\n          marginBottom: 15\n        },\n        flex: \"1\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          style: {\n            width: 190\n          },\n          children: [/*#__PURE__*/_jsxDEV(BlackTooltip, {\n            title: row.desc,\n            placement: \"left\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: row.estado\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(HelpIcon, {\n                style: {\n                  width: 17,\n                  margin: 1,\n                  color: \"gray\",\n                  verticalAlign: \"bottom\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 37\n          }, this), \"    \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 56\n          }, this), \"por \" + row.usuario]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          align: \"right\",\n          children: [row.fecha, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 48\n          }, this), row.accionEncontingencia && /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n            style: {\n              backgroundColor: \"#d5d5d5\",\n              padding: 3,\n              borderRadius: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 500\n              },\n              children: row.comentario.slice(14) === \"Otros\" || row.comentario.slice(14) === \"\" ? \"Contingencia\" : row.comentario.slice(14)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(SecurityOutlinedIcon, {\n              style: {\n                width: 17,\n                marginLeft: 5\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 29\n      }, this), row.mostrarJefeDeTrabajos && /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(PersonOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          style: {\n            marginLeft: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Encargado de firma:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 41\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 68\n          }, this), \" \", row.jefeDeTrabajos]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 33\n      }, this), row.discoSustituido && /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-evenly\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            style: {\n              borderStyle: \"dashed\"\n            },\n            align: \"center\",\n            className: classes.discoSustituidoBox,\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Extraviado \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 63\n            }, this), row.comentario.slice(14).split(\", realizado\")[0].split(\" \")[1]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(ArrowForwardOutlinedIcon, {\n            style: {\n              margin: 10\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            align: \"center\",\n            className: classes.discoSustituidoBox,\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Nuevo \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 58\n            }, this), row.comentario.slice(14).split(\", realizado\")[0].split(\" \")[4]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"column\",\n        className: classes.boxEstado,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          style: {\n            marginBottom: 15\n          },\n          flex: \"1\",\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            style: {\n              width: 190\n            },\n            children: [/*#__PURE__*/_jsxDEV(BlackTooltip, {\n              title: \"aaa\",\n              placement: \"left\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Sustituci\\xF3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(HelpIcon, {\n                  style: {\n                    width: 17,\n                    margin: 1,\n                    color: \"gray\",\n                    verticalAlign: \"bottom\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 45\n            }, this), \"    \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 64\n            }, this), \"por \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 25\n    }, this)) : /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"cargando-icon\",\n        src: \"/PAW/assets/images/loading.gif\",\n        width: \"60px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        color: \"initial\",\n        children: \"Cargando actividades\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        marginBottom: 20,\n        height: 20\n      },\n      children: \" \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 9\n  }, this);\n\n  return props.open && /*#__PURE__*/_jsxDEV(SwipeableDrawer, {\n    anchor: 'right',\n    open: props.open,\n    onClose: props.handleClose,\n    children: panel\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 423,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ConsultaDiscoUnidad, \"zJqFD1s1EOtv0rwUBd+wFvR8nIU=\", false, function () {\n  return [useStyles];\n});\n\n_c = ConsultaDiscoUnidad;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConsultaDiscoUnidad\");","map":{"version":3,"sources":["C:/Users/d896422/Documents/hello/paw_code/src/components/discoUnidad/consultaDiscoUnidad.js"],"names":["React","makeStyles","withStyles","CloseIcon","unidades","SecurityOutlinedIcon","PermIdentityOutlinedIcon","EditOutlinedIcon","LaunchOutlinedIcon","AppContext","obtenerNombrePersona","formatearNombre","formatDate","SendToMobileOutlinedIcon","ArrowForwardOutlinedIcon","PersonOutlinedIcon","HelpIcon","serviciosGEMA","AppBar","Toolbar","IconButton","Typography","Button","Box","SwipeableDrawer","Tooltip","Incidencia","BlackTooltip","tooltip","color","backgroundColor","fontSize","useStyles","theme","appBar","position","title","marginLeft","spacing","marginRight","table","padding","paddingTop","marginTop","actions","cell100","width","maxWidth","cell300","boxEstado","margin","marginBottom","borderRadius","boxEstadoOpen","borderLeft","cursor","unidad","fontWeight","footerAcciones","breakpoints","up","paddingBottom","consultaDisco","discoSustituidoBox","borderWidth","borderColor","borderStyle","comentarioColocacionSIO","ConsultaDiscoUnidad","props","classes","rows","setRows","useState","loading","setLoading","filter","u","id","length","desc","crearHistorico","historico","jefeDeTrabajosActual","datos","estadoAnterior","console","log","map","e","row","rowId","_rowstamp","usuario","changeby","person","comentario","memo","estado","status","mostrarJefeDeTrabajos","jefeDeTrabajos","jefetrabajo","fecha","changedate","d","m","y","hh","mm","accionEncontingencia","startsWith","discoSustituido","push","sort","a","b","i","useEffect","open","get","idDU","then","response","data","member","catch","error","showMoreContent","setshowMoreContent","state","useContext","CONFIG","window","panel","minHeight","handleClose","height","finalizado","numero","ubicacion","operadorCMD","localizar_GOOGLE","latitud","longitud","textDecoration","localizar_EGEO","verticalAlign","slice","split"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport unidades from '../../datos/unidades.json';\r\nimport SecurityOutlinedIcon from '@material-ui/icons/SecurityOutlined';\r\nimport PermIdentityOutlinedIcon from '@material-ui/icons/PermIdentityOutlined';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport LaunchOutlinedIcon from '@material-ui/icons/LaunchOutlined';\r\nimport { AppContext } from '../../appProvider';\r\nimport { obtenerNombrePersona, formatearNombre, formatDate } from '../../utils/utils';\r\nimport SendToMobileOutlinedIcon from '@mui/icons-material/SendToMobileOutlined';\r\nimport ArrowForwardOutlinedIcon from '@mui/icons-material/ArrowForwardOutlined';\r\nimport PersonOutlinedIcon from '@mui/icons-material/PersonOutlined';\r\nimport HelpIcon from '@mui/icons-material/Help';\r\n\r\nimport { serviciosGEMA } from '../../servicios/servicios';\r\n\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    Button,\r\n    Box,\r\n    SwipeableDrawer,\r\n    Tooltip\r\n} from '@material-ui/core';\r\nimport Incidencia from '../incidencia/incidencia';\r\n\r\n\r\nconst BlackTooltip = withStyles({\r\n    tooltip: {\r\n        color: \"white\",\r\n        backgroundColor: \"black\",\r\n        fontSize: 16\r\n    }\r\n})(Tooltip);\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    appBar: {\r\n        position: 'relative',\r\n    },\r\n    title: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    table: {\r\n        padding: theme.spacing(4),\r\n        paddingTop: 0,\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    actions: {\r\n        marginTop: 10,\r\n        marginLeft: 10\r\n    },\r\n    cell100: {\r\n        width: 100,\r\n        maxWidth: 100,\r\n    },\r\n    cell300: {\r\n        width: 300,\r\n        maxWidth: 300,\r\n    },\r\n    boxEstado: {\r\n        margin: 20,\r\n        marginBottom: 0,\r\n        padding: 10,\r\n        borderRadius: 10,\r\n        backgroundColor: \"#cebcbc2b\"\r\n    },\r\n    boxEstadoOpen: {\r\n        margin: 20,\r\n        marginBottom: 0,\r\n        padding: 10,\r\n        backgroundColor: \"#706d6d24\",\r\n        borderLeft: \"3px solid #767676\",\r\n        \"&:hover\": { cursor: 'pointer' }\r\n    },\r\n    unidad: {\r\n        backgroundColor: \"#ededed\",\r\n        padding: 2,\r\n        borderRadius: 5,\r\n        fontWeight: 500\r\n    },\r\n    footerAcciones: {\r\n        [theme.breakpoints.up('lg')]: {\r\n            marginLeft: 56,\r\n        },\r\n        marginLeft: 16,\r\n        paddingBottom: 25\r\n    },\r\n    consultaDisco: {\r\n        width: 400,\r\n        marginLeft: 50\r\n    },\r\n    discoSustituidoBox: {\r\n        backgroundColor: \"white\",\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        width: 80,\r\n        borderWidth: 1,\r\n        borderColor: \"#6a6868\",\r\n        borderStyle: \"solid\"\r\n    },\r\n}));\r\n\r\n\r\nvar comentarioColocacionSIO = \"\";\r\n\r\nexport default function ConsultaDiscoUnidad(props) {\r\n\r\n    const classes = useStyles();\r\n    const [rows, setRows] = React.useState([]);\r\n    const [loading, setLoading] = React.useState(true);\r\n\r\n\r\n    var unidad = unidades.filter(u => u.id == props.unidad);\r\n    unidad = unidad && unidad.length > 0\r\n        ? unidad[0].desc\r\n        : \"unidad destinataria\";\r\n\r\n\r\n    const crearHistorico = (historico, jefeDeTrabajosActual) => {\r\n\r\n        var datos = [];\r\n        var estadoAnterior = \"\";\r\n        console.log(historico);\r\n        historico.map(e => {\r\n            var row = {};\r\n            row.rowId = e._rowstamp;\r\n\r\n            //usuario (registrado por)\r\n            row.usuario = obtenerNombrePersona(e.changeby, e.person, true);\r\n\r\n            //comentario\r\n            row.comentario = e.memo;\r\n\r\n            //estado - mostrar jefe de trabajos\r\n            var estado = e.status;\r\n            row.mostrarJefeDeTrabajos = (estado === \"FIRMPLA\") || (estado === \"FIRM_SOL\") || (estado === \"FIRMADO\");\r\n\r\n            if (estado === \"COLOCADO\") estado = \"Colocado en SIO\";\r\n            if (estado === \"ENVIADO\") estado = \"Disponible en PAW\";\r\n            if (estado === \"FIRMPLA\") estado = \"Planificación de firma\";\r\n            if (estado === \"FIRM_SOL\") estado = \"Solicitud de firma\";\r\n            if (estado === \"RETIRADO\") estado = \"Retirado en SIO\";\r\n            if (estado === \"EXTRAVIADO\") estado = \"Sustituido por extravío\";\r\n            if (estado === \"FIRMADO\") estado = \"Firmado\";\r\n            //aca debo cambiar si el estado es sustituido deberia de ser \r\n            estadoAnterior = estado;\r\n\r\n            row.estado = estado;\r\n\r\n            //jefe de trabajos\r\n            row.jefeDeTrabajos = obtenerNombrePersona(e.jefetrabajo, e.person, true);\r\n\r\n            //fecha\r\n            var fecha = formatDate(e.changedate)\r\n            row.fecha = fecha.d + \" \" + fecha.m + \" \" + fecha.y + \"   \" + fecha.hh + \":\" + (fecha.mm < 10 ? '0' : '') + fecha.mm;\r\n\r\n            //contingencia\r\n            row.accionEncontingencia = row.comentario.startsWith(\"Contingencia: \");\r\n            row.discoSustituido = row.estado === \"Sustituido por extravío\";\r\n\r\n            datos.push(row);\r\n        });\r\n\r\n        datos.sort((a, b) => (a.rowId > b.rowId) ? 1 : ((a.rowId < b.rowId) ? -1 : 0));\r\n\r\n        //recorro los datos y le asigno a cada registro el JT siguiente\r\n        for (var i = 0; i < datos.length - 1; i++)\r\n            datos[i].jefeDeTrabajos = (datos[i].estado === \"Disponible en PAW\" || datos[i].estado === \"Colocado en SIO\" || datos[i].estado === \"Retirado en SIO\")\r\n                ? \"---\"\r\n                : datos[i + 1].jefeDeTrabajos;\r\n\r\n        //el último JT es el actual\r\n        var estado = datos[datos.length - 1].estado;\r\n        datos[datos.length - 1].jefeDeTrabajos =\r\n            ((estado === \"Solicitud de firma\") || (estado === \"Planificación de firma\") || (estado === \"Firmado\"))\r\n                ? formatearNombre(jefeDeTrabajosActual)\r\n                : \"---\";\r\n\r\n        //descripciones segun estado\r\n        var estadoAnterior = null;\r\n\r\n        datos.map(e => {\r\n            if (!estadoAnterior)\r\n                e.desc = \"Disco ingresado en SIO\"\r\n            else if (estadoAnterior === \"Colocado en SIO\") {\r\n                e.desc = \"Disco enviado a unidad destinataria\";\r\n                comentarioColocacionSIO = e.comentario;\r\n            }\r\n            else if (e.estado === \"Firmado\")\r\n                e.desc = \"Disco firmado\"\r\n            else if (e.estado === \"Retirado\")\r\n                e.desc = \"Disco retirado en SIO\"\r\n            else if (estadoAnterior === \"Planificación de firma\" && e.estado === \"Disponible en PAW\")\r\n                e.desc = \"Desasignación de persona para firmar el disco\"\r\n            else if (estadoAnterior === \"Disponible en PAW\" && e.estado === \"Planificación de firma\")\r\n                e.desc = \"Designación de persona para firmar el disco\"\r\n            else if (estadoAnterior === \"Disponible en PAW\" && e.estado === \"Solicitud de firma\")\r\n                e.desc = \"Designación de persona para firmar el disco\"\r\n            else if (estadoAnterior === \"Planificación de firma\" && e.estado === \"Solicitud de firma\")\r\n                e.desc = \"Automático: discos nominados asociados firmados\"\r\n            else if (estadoAnterior === \"Solicitud de firma\" && e.estado === \"Planificación de firma\")\r\n                if (e.comentario === \"Cambio automático. Nueva Asignacion de jefe de trabajo.\")\r\n                    e.desc = \"Automático: nueva asigación de jefe de trabajo\"\r\n                else\r\n                    e.desc = \"Cancelación de solicitud de firma\"\r\n            else if (e.estado === \"Retirado en SIO\")\r\n                e.desc = \"Disco retirado en SIO\"\r\n            else if (estadoAnterior === \"Solicitud de firma\" && e.estado === \"Disponible en PAW\")\r\n                e.desc = \"Cancelación de solicitud de firma\"\r\n            // aca habria que colocar otra descripcion para que diga Incidencia sustituida por tal \r\n            //lo que vendria a ser el cambio que solicitan el de cambio de incidencia en discos\r\n            // else if(e.estado === \"\")\r\n            // e.desc = \"Disco viene de la incidencia anterior\" + numero de incidencia    \r\n            else if (e.estado === \"Sustituido por extravío\")\r\n                e.desc = \"Se coloca un nuevo disco\"\r\n            estadoAnterior = e.estado;\r\n        })\r\n        return datos\r\n    };\r\n\r\n    var datos = [];\r\n    React.useEffect(() => {\r\n        if (props.open) {\r\n            setLoading(true);\r\n            serviciosGEMA.get('/utd_nardisdisco/' + props.idDU + '/utd_hstatusnardisdisco?lean=1&oslc.select=*&_dropnulls=0')\r\n                .then(response => {\r\n                    datos = crearHistorico(response.data.member, props.jefeDeTrabajosActual);\r\n                    setRows(datos);\r\n                    setLoading(false);\r\n                })\r\n                .catch(error => {\r\n                    setLoading(false);\r\n                    console.log(\"Error cargar las actividades del disco a unidad\")\r\n                })\r\n        }\r\n    }, [props.open])\r\n\r\n    //ocultar/mostrar contenido en vista celular\r\n    const [showMoreContent, setshowMoreContent] = React.useState({});\r\n\r\n    //perfil\r\n    const [state,] = React.useContext(AppContext);\r\n\r\n    const CONFIG = window.data;\r\n    console.log(\"estoy en row\")\r\n    console.log(rows)\r\n    const panel = (\r\n        <div style={{ maxWidth: 400 }}>\r\n            <AppBar className={classes.appBar} color=\"transparent\" elevation={0}>\r\n\r\n                <Toolbar style={{ minHeight: 90 }}>\r\n                    <IconButton edge=\"start\" color=\"inherit\" onClick={props.handleClose} aria-label=\"close\" style={{ marginRight: 10 }}>\r\n                        <CloseIcon />\r\n                        {/* icono de la foto dell disco */}\r\n                    </IconButton>\r\n\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\r\n                        {/* icono de la foto dell disco */}\r\n                        <img\r\n\r\n                            style={{ height: 50 }}\r\n                            alt=\"\"\r\n                            src={(!props.finalizado)\r\n                                ? \"/PAW/assets/images/unidadIcon.svg\"\r\n                                : \"/PAW/assets/images/unidadGrisIcon.svg\"}\r\n                        />\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" className={classes.title}>\r\n                            <Typography variant=\"h6\">\r\n                                {props.numero}\r\n                                {/* numero de disco */}\r\n                            </Typography>\r\n\r\n                            <span className={classes.unidad}>{unidad}</span>\r\n                        </Box>\r\n                    </Box>\r\n\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Box display=\"flex\" flexDirection=\"column\" style={{ margin: 20, marginBottom: 0, marginTop: 5, padding: 10 }}>\r\n                <Typography variant=\"body1\">\r\n                    {props.ubicacion}\r\n                </Typography>\r\n\r\n                {\r\n                    !state.operadorCMD &&\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"left\" style={{ marginTop: 5 }} >\r\n\r\n                        <a href={CONFIG.localizar_GOOGLE(props.latitud, props.longitud)}\r\n                            target=\"_blank\"\r\n                            style={{ textDecoration: 'none' }}>\r\n                            <Button variant='contained' color=\"secondary\" endIcon={<LaunchOutlinedIcon />}>\r\n                                Google Maps\r\n                            </Button>\r\n                        </a>\r\n\r\n                        <a href={CONFIG.localizar_EGEO(props.latitud, props.longitud)}\r\n                            target=\"_blank\"\r\n                            style={{ textDecoration: 'none' }}>\r\n                            <Button variant='contained' color=\"secondary\" endIcon={<LaunchOutlinedIcon />} style={{ marginLeft: 10 }}>\r\n                                EGEO WEB\r\n                            </Button>\r\n\r\n                        </a>\r\n\r\n                    </Box>\r\n                }\r\n\r\n\r\n            </Box>\r\n\r\n\r\n            {\r\n                !loading ?\r\n\r\n                    rows.map((row) => (\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" className={classes.boxEstado}>\r\n                            <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" style={{ marginBottom: 15 }} flex=\"1\">\r\n\r\n\r\n                                <Typography variant=\"body1\" style={{ width: 190 }}>\r\n                                    <BlackTooltip title={row.desc} placement=\"left\">\r\n                                        <span >\r\n\r\n                                            <b >{row.estado}</b>\r\n                                            <HelpIcon style={{ width: 17, margin: 1, color: \"gray\", verticalAlign: \"bottom\" }} />\r\n\r\n                                        </span>\r\n                                    </BlackTooltip>    <br />\r\n                                    {\"por \" + row.usuario}\r\n                                </Typography>\r\n\r\n\r\n                                <Typography variant=\"body1\" align=\"right\">\r\n                                    {row.fecha}<br />\r\n                                    {row.accionEncontingencia &&\r\n                                        <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" style={{ backgroundColor: \"#d5d5d5\", padding: 3, borderRadius: 5 }}>\r\n                                            <span style={{ fontWeight: 500 }}>{(row.comentario.slice(14) === \"Otros\" || row.comentario.slice(14) === \"\") ? \"Contingencia\" : row.comentario.slice(14)}</span>\r\n                                            <SecurityOutlinedIcon style={{ width: 17, marginLeft: 5 }} />\r\n                                        </Box>\r\n                                    }\r\n                                </Typography>\r\n\r\n                            </Box>\r\n\r\n                            {row.mostrarJefeDeTrabajos &&\r\n                                <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\r\n                                    <PersonOutlinedIcon />\r\n                                    <Typography variant=\"body1\" style={{ marginLeft: 10 }}>\r\n                                        <b>Encargado de firma:</b> <br /> {row.jefeDeTrabajos}\r\n                                    </Typography>\r\n                                </Box>\r\n                            }\r\n\r\n\r\n\r\n\r\n                            {row.discoSustituido &&\r\n                                <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"space-evenly\">\r\n\r\n                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\r\n                                        <Typography variant=\"body1\" style={{ borderStyle: \"dashed\" }} align=\"center\" className={classes.discoSustituidoBox}>\r\n                                            <b>Extraviado </b><br />\r\n                                            {row.comentario.slice(14).split(\", realizado\")[0].split(\" \")[1]}\r\n                                        </Typography>\r\n\r\n                                        <ArrowForwardOutlinedIcon style={{ margin: 10 }} />\r\n\r\n                                        <Typography variant=\"body1\" align=\"center\" className={classes.discoSustituidoBox} >\r\n                                            <b>Nuevo </b><br />\r\n                                            {row.comentario.slice(14).split(\", realizado\")[0].split(\" \")[4]}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            }\r\n                            {/* -----------cambio para imprimir foto ----------------- */}\r\n                            {\r\n                                <Box display=\"flex\" flexDirection=\"column\" className={classes.boxEstado}>\r\n                                    <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" style={{ marginBottom: 15 }} flex=\"1\">\r\n                                        <Typography variant=\"body1\" style={{ width: 190 }}>\r\n                                            <BlackTooltip title={\"aaa\"} placement=\"left\">\r\n                                                <span >\r\n\r\n                                                    <b >Sustitución</b>\r\n                                                    <HelpIcon style={{ width: 17, margin: 1, color: \"gray\", verticalAlign: \"bottom\" }} />\r\n\r\n                                                </span>\r\n                                            </BlackTooltip>    <br />\r\n                                            {\"por \"}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                               \r\n        }\r\n         {/* --------------cambio para imprimir foto -------------- */}\r\n                        </Box>\r\n\r\n\r\n\r\n                    ))\r\n                    :\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\r\n                        <img alt=\"cargando-icon\" src=\"/PAW/assets/images/loading.gif\" width=\"60px\" />\r\n                        <Typography variant=\"subtitle1\" color=\"initial\">Cargando actividades</Typography>\r\n                    </Box>\r\n            }\r\n\r\n            <Box style={{ marginBottom: 20, height: 20 }}> </Box>\r\n\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        props.open &&\r\n        <SwipeableDrawer\r\n            anchor={'right'}\r\n            open={props.open}\r\n            onClose={props.handleClose}\r\n        >\r\n            {panel}\r\n        </SwipeableDrawer>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}